const t="http://localhost:4000";chrome.runtime.onMessage.addListener((r,e,o)=>{r.type==="IMPROVE_PROMPT"&&n(r.text)});async function n(r){try{const e=await fetch(`${t}/improve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})});if(!e.ok)throw new Error(`Server returned ${e.status}: ${e.statusText}`);const o=await e.json();chrome.runtime.sendMessage({type:"IMPROVED_TEXT",text:o.improvedPrompt})}catch(e){console.error("Error improving prompt:",e),chrome.runtime.sendMessage({type:"ERROR",error:e instanceof Error?e.message:"Unknown error occurred"})}}console.log("PromptPilot background service worker initialized");
